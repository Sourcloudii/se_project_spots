!function(){"use strict";const e=e=>{e.disabled=!0},t=(t,o)=>{(e=>e.some((e=>!e.validity.valid)))(t)?e(o):o.disabled=!1},o=document.querySelectorAll(".modal__close-btn"),n=document.querySelectorAll(".modal"),r=document.querySelector(".profile__edit-btn"),a=document.querySelector(".profile__name"),l=document.querySelector(".profile__description"),c=document.querySelector("#edit-modal"),s=c.querySelector(".modal__form"),i=c.querySelector("#profile-name-input"),d=c.querySelector("#profile-description-input"),u=document.querySelector("#add-card-modal"),m=u.querySelector(".modal__form"),p=document.querySelector(".profile__post-btn"),_=u.querySelector("#card-link-input"),f=u.querySelector("#card-caption-input"),y=document.querySelector("#preview-modal"),v=y.querySelector(".modal__image"),S=y.querySelector(".modal__caption"),h=document.querySelector("#card-template").content.querySelector(".card"),w=document.querySelector(".cards__list");function q(e){const t=h.cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return o.textContent=e.name,n.src=e.link,n.alt=e.alt,r.addEventListener("click",(()=>{r.classList.toggle("card__like-btn_liked")})),a.addEventListener("click",(()=>{a.closest(".card").remove()})),n.addEventListener("click",(()=>{g(y),v.src=e.link,v.alt=e.alt,S.textContent=e.name})),t}function g(e){e.classList.add("modal_opened"),document.addEventListener("keydown",k)}function b(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",k)}function k(e){"Escape"===e.key&&b(document.querySelector(".modal_opened"))}var E;o.forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>b(t)))})),n.forEach((e=>{e.addEventListener("click",(t=>{t.target===e&&b(e)}))})),r.addEventListener("click",(()=>{i.value=a.textContent,d.value=l.textContent,resetValidation(s,[i,d]),g(c)})),s.addEventListener("submit",(function(e){e.preventDefault(),a.textContent=i.value,l.textContent=d.value,b(c)})),p.addEventListener("click",(()=>{g(u)})),m.addEventListener("submit",(function(e){e.preventDefault();const t=q({name:f.value,link:_.value});w.prepend(t),b(u),m.reset()})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg",alt:"Snowy mountain view from a window."},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg",alt:"Restaurant terrace with tables and decorations."},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg",alt:"Outdoor cafe with people dining."},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg",alt:"Suspension bridge over a dense forest."},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg",alt:"Sunlit tunnel with a person walking inside."},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg",alt:"Snowy mountain house with trees in the background."}].forEach((function(e){const t=q(e);w.append(t)})),E={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},document.querySelectorAll(E.formSelector).forEach((o=>{o.addEventListener("submit",(t=>{t.preventDefault(),e(t.submitter)})),((e,o)=>{const n=Array.from(e.querySelectorAll(o.inputSelector)),r=e.querySelector(o.submitButtonSelector);t(n,r),n.forEach((a=>{a.addEventListener("input",(function(){((e,t,o)=>{t.validity.valid?((e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);n&&(t.classList.remove(o.inputErrorClass),n.textContent="")})(e,t,o):((e,t,o,n)=>{const r=e.querySelector(`#${t.id}-error`);t.classList.add(n.inputErrorClass),r.textContent=o})(e,t,t.validationMessage,o)})(e,a,o),t(n,r)}))}))})(o,E)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxFQUFVd0QsU0FBU3RELElBQ2pCQSxFQUFhd0MsaUJBQWlCLFNBQVMsV0F2Q2hCbUMsRUFBQ0wsRUFBYXRFLEVBQWNxRCxLQUNoRHJELEVBQWFDLFNBQVNDLE1BWk4wRSxFQUFDTixFQUFhdEUsRUFBY3FELEtBQ2pELE1BQU13QixFQUFlUCxFQUFZN0QsY0FBYyxJQUFJVCxFQUFhOEUsWUFFNURELElBQ0Y3RSxFQUFheUMsVUFBVUcsT0FBT1MsRUFBT2UsaUJBQ3JDUyxFQUFhMUMsWUFBYyxLQVUzQnlDLENBQWVOLEVBQWF0RSxFQUFjcUQsR0F0QnZCMEIsRUFBQ1QsRUFBYXRFLEVBQWNnRixFQUFjM0IsS0FDL0QsTUFBTXdCLEVBQWVQLEVBQVk3RCxjQUFjLElBQUlULEVBQWE4RSxZQUVoRTlFLEVBQWF5QyxVQUFVTSxJQUFJTSxFQUFPZSxpQkFDbENTLEVBQWExQyxZQUFjNkMsR0FnQnpCRCxDQUFlVCxFQUFhdEUsRUFBY0EsRUFBYWlGLGtCQUFtQjVCLElBc0N4RXNCLENBQW1CTCxFQUFhdEUsRUFBY3FELEdBQzlDeEQsRUFBa0JDLEVBQVdILEVBQy9CLFFBWUE2RSxDQUFrQkYsRUFBYWpCLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy9jYXJkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idG5cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZS1idG5fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG5cbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG5cbiAgaWYgKGVycm9yRWxlbWVudCkge1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuO1xuICB9XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGRpc2FibGVkQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQpID0+IHtcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcblxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSA9PiB7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGRpc2FibGVkQnV0dG9uKGJ1dHRvbkVsZW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxufTtcblxuY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbGVtZW50LCBpbnB1dExpc3QpID0+IHtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0LCBzZXR0aW5ncyk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xuXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGRpc2FibGVkQnV0dG9uKGV2dC5zdWJtaXR0ZXIpO1xuICAgIH0pO1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn07IiwiaW1wb3J0IHsgZW5hYmxlVmFsaWRhdGlvbiwgc2V0dGluZ3MgfSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vc2NyaXB0cy9jYXJkcy5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuLy9Vbml2ZXJzYWwgdmFyaWFibGVzXG5jb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XG5cbi8vRWRpdCBQcm9maWxlIE1vZGFsc1xuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5jb25zdCBlZGl0Rm9ybUVsID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBlZGl0TW9kYWxOYW1lSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XG5jb25zdCBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKTtcblxuLy9Qb3N0IENhcmQgTW9kYWxzXG5jb25zdCBjYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xuY29uc3QgY2FyZEZvcm0gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGNhcmRQb3N0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wb3N0LWJ0blwiKTtcbmNvbnN0IGNhcmRsaW5rSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWxpbmstaW5wdXRcIik7XG5jb25zdCBjYXJkQ2FwdGlvbklucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1jYXB0aW9uLWlucHV0XCIpO1xuXG4vL1ByZXZpZXcgTW9kYWxzXG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3SW1hZ2VFbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdDYXB0aW9uRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcblxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuZnVuY3Rpb24gZ2V0Q2FyZEVsKGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcblxuICBjb25zdCBjYXJkTmFtZUVsID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRJbWFnZUVsID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRMaWtlRWwgPSBjYXJkRWwucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ0blwiKTtcbiAgY29uc3QgY2FyZERlbGV0ZUVsID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ0blwiKTtcblxuICBjYXJkTmFtZUVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsLmFsdCA9IGRhdGEuYWx0O1xuXG4gIGNhcmRMaWtlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkTGlrZUVsLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcbiAgfSk7XG5cbiAgY2FyZERlbGV0ZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc3QgY2FyZEl0ZW0gPSBjYXJkRGVsZXRlRWwuY2xvc2VzdChcIi5jYXJkXCIpO1xuICAgIGNhcmRJdGVtLnJlbW92ZSgpO1xuICB9KTtcblxuICBjYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICAgIHByZXZpZXdJbWFnZUVsLnNyYyA9IGRhdGEubGluaztcbiAgICBwcmV2aWV3SW1hZ2VFbC5hbHQgPSBkYXRhLmFsdDtcbiAgICBwcmV2aWV3Q2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsO1xufVxuXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGUpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3BlbmVkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcbiAgICBjbG9zZU1vZGFsKG9wZW5lZE1vZGFsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZWRpdE1vZGFsTmFtZUlucHV0LnZhbHVlO1xuICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICBjbG9zZU1vZGFsKGVkaXRNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7IG5hbWU6IGNhcmRDYXB0aW9uSW5wdXQudmFsdWUsIGxpbms6IGNhcmRsaW5rSW5wdXQudmFsdWUgfTtcbiAgY29uc3QgY2FyZEVsID0gZ2V0Q2FyZEVsKGlucHV0VmFsdWVzKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsKTtcbiAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xuICBjYXJkRm9ybS5yZXNldCgpO1xufVxuXG4vL0Nsb3NlIG1vZGFsc1xuY2xvc2VCdG4uZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIGNvbnN0IG1vZGFsID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG5cbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKG1vZGFsKSk7XG59KTtcblxubW9kYWxzLmZvckVhY2goKG1vZGFsKSA9PiB7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQgPT09IG1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vRWRpdCBQcm9maWxlXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0TW9kYWxOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcbiAgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgcmVzZXRWYWxpZGF0aW9uKGVkaXRGb3JtRWwsIFtlZGl0TW9kYWxOYW1lSW5wdXQsIGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXRdKTtcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XG59KTtcbmVkaXRGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5cbi8vTmV3IFBvc3RcbmNhcmRQb3N0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Nb2RhbChjYXJkTW9kYWwpO1xufSk7XG5cbmNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xuXG4vL1ByZXZpZXcgQ2FyZFxuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICBjb25zdCBjYXJkRWwgPSBnZXRDYXJkRWwoaXRlbSk7XG4gIGNhcmRzTGlzdC5hcHBlbmQoY2FyZEVsKTtcbn0pO1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTsiLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgICBhbHQ6IFwiU25vd3kgbW91bnRhaW4gdmlldyBmcm9tIGEgd2luZG93LlwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMi1waG90by1ieS1jZWlsaW5lLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICAgIGFsdDogXCJSZXN0YXVyYW50IHRlcnJhY2Ugd2l0aCB0YWJsZXMgYW5kIGRlY29yYXRpb25zLlwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBbiBvdXRkb29yIGNhZmVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICAgIGFsdDogXCJPdXRkb29yIGNhZmUgd2l0aCBwZW9wbGUgZGluaW5nLlwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBIHZlcnkgbG9uZyBicmlkZ2UsIG92ZXIgdGhlIGZvcmVzdCBhbmQgdGhyb3VnaCB0aGUgdHJlZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNC1waG90by1ieS1tYXVyaWNlLWxhc2NoZXQtZnJvbS1wZXhlbHMuanBnXCIsXG4gICAgYWx0OiBcIlN1c3BlbnNpb24gYnJpZGdlIG92ZXIgYSBkZW5zZSBmb3Jlc3QuXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlR1bm5lbCB3aXRoIG1vcm5pbmcgbGlnaHRcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNS1waG90by1ieS12YW4tYW5oLW5ndXllbi1mcm9tLXBleGVscy5qcGdcIixcbiAgICBhbHQ6IFwiU3VubGl0IHR1bm5lbCB3aXRoIGEgcGVyc29uIHdhbGtpbmcgaW5zaWRlLlwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgICBhbHQ6IFwiU25vd3kgbW91bnRhaW4gaG91c2Ugd2l0aCB0cmVlcyBpbiB0aGUgYmFja2dyb3VuZC5cIixcbiAgfSxcbl07XG5cbiJdLCJuYW1lcyI6WyJkaXNhYmxlZEJ1dHRvbiIsImJ1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0Iiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJjbG9zZUJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIm1vZGFscyIsInByb2ZpbGVFZGl0QnRuIiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiZWRpdE1vZGFsIiwiZWRpdEZvcm1FbCIsImVkaXRNb2RhbE5hbWVJbnB1dCIsImVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQiLCJjYXJkTW9kYWwiLCJjYXJkRm9ybSIsImNhcmRQb3N0QnRuIiwiY2FyZGxpbmtJbnB1dCIsImNhcmRDYXB0aW9uSW5wdXQiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3SW1hZ2VFbCIsInByZXZpZXdDYXB0aW9uRWwiLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2FyZHNMaXN0IiwiZ2V0Q2FyZEVsIiwiZGF0YSIsImNhcmRFbCIsImNsb25lTm9kZSIsImNhcmROYW1lRWwiLCJjYXJkSW1hZ2VFbCIsImNhcmRMaWtlRWwiLCJjYXJkRGVsZXRlRWwiLCJ0ZXh0Q29udGVudCIsIm5hbWUiLCJzcmMiLCJsaW5rIiwiYWx0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNsb3Nlc3QiLCJyZW1vdmUiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImFkZCIsImhhbmRsZUVzY2FwZSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwiY29uZmlnIiwiZm9yRWFjaCIsImJ1dHRvbiIsInRhcmdldCIsInZhbHVlIiwicmVzZXRWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJwcmVwZW5kIiwicmVzZXQiLCJpdGVtIiwiYXBwZW5kIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJmb3JtRWxlbWVudCIsInN1Ym1pdHRlciIsInNldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwiaGlkZUlucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJpZCIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9